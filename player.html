<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Play Game - CARBON</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <style>
    .loader {
      border: 8px solid #16213e;
      border-top: 8px solid #06b6d4;
      border-radius: 50%;
      width: 70px;
      height: 70px;
      animation: spin 1s linear infinite;
      margin: auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .tag-btn.active {
      background: #22d3ee22;
      color: #06b6d4 !important;
      border-color: #06b6d4 !important;
    }
    .suggested-scrollbar::-webkit-scrollbar {width: 6px;}
    .suggested-scrollbar::-webkit-scrollbar-thumb {background: #232445; border-radius: 3px;}
    .suggested-scrollbar::-webkit-scrollbar-track {background: transparent;}
  </style>
</head>
<body class="bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] min-h-screen text-white font-[Inter]">
  <div id="preloader" class="fixed z-[9999] inset-0 flex flex-col justify-center items-center bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e]">
    <div class="loader"></div>
  </div>
  <nav class="flex items-center justify-between px-8 py-4 bg-[#0f0f23cc] border-b border-white/10 backdrop-blur-md fixed top-0 left-0 right-0 z-50">
    <a href="index.html" class="text-2xl font-extrabold bg-gradient-to-r from-cyan-400 to-indigo-500 bg-clip-text text-transparent tracking-tighter">CARBON</a>
    <div class="flex items-center gap-4">
      <div id="userSection"></div>
    </div>
  </nav>
  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="flex flex-col items-center justify-center h-screen w-full bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] fixed left-0 top-0 z-50">
    <div class="bg-[#1a1a2e] rounded-2xl shadow-2xl p-12 border border-cyan-600/30 flex flex-col items-center">
      <div class="text-3xl font-bold bg-gradient-to-r from-cyan-400 to-indigo-500 bg-clip-text text-transparent mb-6">Sign In to Play</div>
      <button onclick="alert('Fake login for demo')" class="flex items-center gap-3 bg-cyan-500 hover:bg-cyan-400 text-black font-bold px-6 py-3 rounded-lg text-lg transition">
        <i class='bx bxl-google text-2xl'></i> Sign in with Google
      </button>
      <div id="loginError" class="text-pink-400 mt-6 hidden"></div>
    </div>
  </div>
  <main class="pt-28 max-w-7xl mx-auto px-4">
    <div class="flex flex-col-reverse lg:flex-row gap-8">
      <!-- LEFT: Main Content (Game Info, Game Frame, etc) -->
      <div class="flex-1 min-w-0">
        <div id="gameInfoHolder" class="rounded-2xl shadow-2xl bg-[#181b2a] border border-cyan-600/30 overflow-hidden mt-2"></div>
        <div id="gameFrameContainer" class="rounded-2xl shadow-2xl bg-[#181b2a] border border-cyan-600/30 overflow-hidden mt-8 hidden"></div>
      </div>
      <!-- RIGHT: SUGGESTED GAMES SIDEBAR -->
      <aside id="suggestedSidebar"
        class="relative w-full lg:w-80 shrink-0 mb-6 lg:mb-0 lg:sticky lg:top-32">
        <div class="bg-[#181b2a] border border-cyan-600/30 rounded-2xl shadow-xl px-4 py-6 h-full">
          <h2 class="text-xl font-extrabold text-cyan-400 mb-4 flex items-center gap-2">
            <i class='bx bx-joystick text-2xl'></i>
            Suggested Games
          </h2>
          <div id="suggestedGamesList" class="flex flex-col gap-4 max-h-[70vh] overflow-y-auto suggested-scrollbar">
            <!-- Game cards injected here -->
          </div>
        </div>
      </aside>
    </div>
  </main>
  <script>
    // DEMO: Hardcoded games.json. In prod, fetch('games.json')
    const gamesData = [
  {
    "id": 1,
    "title": "1v1 LOL",
    "category": "action",
    "image": "https://via.placeholder.com/400x300/00d4ff/ffffff?text=1v1+LOL",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Epic 1v1 battle arena",
    "featured": true,
    "url": "https://www.crazygames.com/game/1v1-lol",
    "developer": "JustPlay.LOL",
    "release": "2020",
    "technology": "HTML5",
    "platforms": ["Browser"],
    "tags": ["action", "shooter", "multiplayer", "1v1"],
    "controls": "WASD to move, Mouse to aim/shoot, 1-5 to build/select weapons"
  },
  {
    "id": 2,
    "title": "Roblox",
    "category": "action",
    "image": "https://tse2.mm.bing.net/th/id/OIP.981-FbYoVZc6ZUkc2Z3zcwHaEK?r=0&rs=1&pid=ImgDetMain&o=7&rm=3",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Create and play experiences",
    "featured": true,
    "url": "https://www.roblox.com/",
    "developer": "Roblox Corporation",
    "release": "2006",
    "technology": "HTML5",
    "platforms": ["Browser", "Mobile", "PC"],
    "tags": ["action", "sandbox", "multiplayer", "adventure"],
    "controls": "WASD or arrow keys to move, Mouse to interact (depends on game)"
  },
  {
    "id": 3,
    "title": "Minecraft",
    "category": "strategy",
    "image": "https://tse2.mm.bing.net/th/id/OIP.981-FbYoVZc6ZUkc2Z3zcwHaEK?r=0&rs=1&pid=ImgDetMain&o=7&rm=3",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Build, explore, survive",
    "featured": false,
    "url": "https://classic.minecraft.net/",
    "developer": "Mojang",
    "release": "2009",
    "technology": "HTML5",
    "platforms": ["Browser"],
    "tags": ["strategy", "sandbox", "survival", "building"],
    "controls": "WASD to move, Mouse to look/build, Left click to destroy, Right click to place"
  },
  {
    "id": 4,
    "title": "Test",
    "category": "puzzle",
    "image": "https://tse2.mm.bing.net/th/id/OIP.981-FbYoVZc6ZUkc2Z3zcwHaEK?r=0&rs=1&pid=ImgDetMain&o=7&rm=3",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Test your skills",
    "featured": true,
    "url": "https://example.com/test",
    "developer": "Test Studio",
    "release": "2022",
    "technology": "HTML5",
    "platforms": ["Browser"],
    "tags": ["puzzle", "logic", "casual"],
    "controls": "Click with your mouse to interact"
  },
  {
    "id": 5,
    "title": "2048",
    "category": "puzzle",
    "image": "https://via.placeholder.com/400x300/5865f2/ffffff?text=2048",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Numbers puzzle game",
    "featured": false,
    "url": "https://play2048.co/",
    "developer": "Gabriele Cirulli",
    "release": "2014",
    "technology": "HTML5",
    "platforms": ["Browser", "Mobile"],
    "tags": ["puzzle", "numbers", "logic"],
    "controls": "Arrow keys or swipe to move tiles"
  },
  {
    "id": 6,
    "title": "Placeholder Game 1",
    "category": "arcade",
    "image": "https://via.placeholder.com/400x300/8b5cf6/ffffff?text=Placeholder+1",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Placeholder description",
    "featured": false,
    "url": "https://example.com/placeholder1",
    "developer": "Placeholder Studios",
    "release": "2023",
    "technology": "HTML5",
    "platforms": ["Browser"],
    "tags": ["arcade", "casual"],
    "controls": "Use your mouse or keyboard as prompted"
  },
  {
    "id": 7,
    "title": "Placeholder Game 2",
    "category": "racing",
    "image": "https://via.placeholder.com/400x300/00d4ff/ffffff?text=Placeholder+2",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Placeholder description",
    "featured": false,
    "url": "https://example.com/placeholder2",
    "developer": "Placeholder Studios",
    "release": "2023",
    "technology": "HTML5",
    "platforms": ["Browser"],
    "tags": ["racing", "cars"],
    "controls": "Arrow keys to steer, Space to brake"
  },
  {
    "id": 8,
    "title": "Placeholder Game 3",
    "category": "strategy",
    "image": "",
    "gif": "https://static.wikia.nocookie.net/1v1lol/images/0/08/Specopsshooting.gif/revision/latest?cb=20231212181410",
    "description": "Placeholder description",
    "featured": false,
    "url": "https://example.com/placeholder3",
    "developer": "Placeholder Studios",
    "release": "2023",
    "technology": "HTML5",
    "platforms": ["Browser"],
    "tags": ["strategy", "casual"],
    "controls": "Use your mouse to play"
  },
  {
    "id": 9,
    "title": "Ludo Party Game",
    "category": "board",
    "image": "",
    "featured": true,
    "url": "https://example.com/ludo-party",
    "developer": "Friendzy Studios",
    "release": "June 2025",
    "technology": "HTML5",
    "platforms": ["Browser (desktop, mobile, tablet)"],
    "tags": ["puzzle", "mobile", "board", "strategy", "2D", "mouse", "multiplayer"],
    "controls": "Use the left mouse button to roll the dice and move your tokens."
  }
];
    // Simulate login always
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('userSection').innerHTML = `
      <img src="https://i.pravatar.cc/40" class="w-8 h-8 rounded-full inline mr-2" title="Demo User">
      <span class="mr-3">Demo User</span>
      <button onclick="alert('Sign out for demo')" class="bg-white/10 px-3 py-1 rounded hover:bg-pink-600 text-white">Sign Out</button>
    `;
    // Helpers
    function showPreloader() { document.getElementById('preloader').style.display = ''; }
    function hidePreloader() { document.getElementById('preloader').style.display = 'none'; }
    // SUGGESTED GAMES LOGIC
    function getSuggestedGames(currentId, currentCategory, limit = 8) {
      let filtered = [];
      if (currentId && currentCategory) {
        filtered = gamesData.filter(
          g => g.id !== currentId && g.category === currentCategory
        );
      }
      if (filtered.length < limit) {
        let others = gamesData.filter(g => g.id !== currentId && !filtered.includes(g));
        while (filtered.length < limit && others.length) {
          let idx = Math.floor(Math.random() * others.length);
          filtered.push(others.splice(idx, 1)[0]);
        }
      }
      for (let i = filtered.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [filtered[i], filtered[j]] = [filtered[j], filtered[i]];
      }
      return filtered.slice(0, limit);
    }
    function renderSuggestedGamesSidebar(suggestedGames) {
      const container = document.getElementById("suggestedGamesList");
      if (!container) return;
      container.innerHTML = suggestedGames.map(game => `
        <a href="?id=${game.id}" class="block group rounded-xl overflow-hidden shadow-lg bg-[#232445] border border-white/10 hover:border-cyan-400/60 transition relative">
          <div class="relative aspect-video bg-black">
            <img src="${game.image || 'https://via.placeholder.com/400x300/232445/ffffff?text=No+Image'}" alt="${game.title}" class="w-full h-full object-cover group-hover:scale-[1.04] transition duration-200 pointer-events-none select-none" />
            ${game.featured ? `<span class="absolute top-2 right-2 bg-indigo-600/80 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow">FEATURED</span>` : ""}
          </div>
          <div class="p-3 flex flex-col gap-1">
            <div class="text-cyan-300 font-bold text-base truncate group-hover:text-cyan-400 transition">${game.title}</div>
            <div class="flex items-center gap-2 flex-wrap">
              <span class="bg-cyan-400/20 text-cyan-300 text-xs px-2 py-0.5 rounded-full font-semibold">${game.category || ''}</span>
              ${(game.tags && game.tags.length) ? `<span class="bg-indigo-400/20 text-indigo-200 text-xs px-2 py-0.5 rounded-full font-semibold">${game.tags[0]}</span>` : ""}
            </div>
          </div>
        </a>
      `).join('');
    }
    // MAIN GAME INFO
    function renderGameInfo(game) {
      document.getElementById('gameInfoHolder').innerHTML = `
      <div class="relative aspect-video bg-black flex items-center justify-center">
        <img id="gameCoverImg" src="${game.image || 'https://via.placeholder.com/400x300/232445/ffffff?text=No+Image'}" class="w-full h-full object-cover pointer-events-none select-none rounded-t-2xl" alt="Game Cover" />
        <button id="bigPlayBtn" class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 bg-gradient-to-br from-cyan-400 to-indigo-500 text-white font-extrabold rounded-lg px-6 py-3 shadow-lg text-lg hover:scale-105 transition-all flex items-center gap-3 group min-w-[120px]">
          <i class='bx bx-play-circle text-2xl drop-shadow-lg group-hover:scale-110 transition-transform'></i>
          <span class="block text-base font-bold">Play</span>
        </button>
        <div class="absolute bottom-4 left-4 flex gap-3">
          <span id="gameCategoryTag" class="bg-cyan-400/30 text-cyan-300 px-3 py-1 rounded text-xs font-semibold">${game.category || ''}</span>
          ${game.featured ? '<span id="gameFeaturedTag" class="bg-indigo-400/30 text-indigo-200 px-3 py-1 rounded text-xs font-semibold">Featured</span>' : ''}
        </div>
      </div>
      <div class="flex flex-col md:flex-row p-6 gap-6 items-start bg-[#232445]">
        <div class="flex-1">
          <div id="gameTitleDisplay" class="text-2xl md:text-3xl font-extrabold text-cyan-400 mb-3">${game.title}</div>
          <p id="gameFrameDesc" class="text-white/80 mb-2 text-base leading-relaxed">${game.description || ""}</p>
          <div id="gameInfoBox" class="mt-6 w-full">
            <div class="bg-[#181b2a] border border-cyan-600/30 rounded-2xl px-6 py-5 text-white">
              <table class="w-full text-left">
                <tbody id="gameInfoTable">
                  <tr>
                    <th class="pr-4 py-1 text-cyan-400 font-semibold align-top">Developer</th>
                    <td class="py-1">${game.developer || "Unknown"}</td>
                  </tr>
                  <tr>
                    <th class="pr-4 py-1 text-cyan-400 font-semibold align-top">Release</th>
                    <td class="py-1">${game.release || "Unknown"}</td>
                  </tr>
                  <tr>
                    <th class="pr-4 py-1 text-cyan-400 font-semibold align-top">Technology</th>
                    <td class="py-1">${game.technology || "Unknown"}</td>
                  </tr>
                  <tr>
                    <th class="pr-4 py-1 text-cyan-400 font-semibold align-top">Platforms</th>
                    <td class="flex flex-wrap gap-2 py-1">
                      ${(Array.isArray(game.platforms) ? game.platforms.map(p => `<span class="bg-[#232445] text-cyan-300 px-2 py-[2px] rounded-full text-xs font-semibold">${p}</span>`).join('') : (game.platforms || "Unknown"))}
                    </td>
                  </tr>
                  <tr>
                    <th class="pr-4 py-1 text-cyan-400 font-semibold align-top">Controls</th>
                    <td class="py-1">${game.controls || "See in-game"}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="flex flex-col gap-2 w-full md:w-auto">
          <a href="${game.url}" target="_blank" rel="noopener" class="bg-gradient-to-r from-cyan-400 to-indigo-500 text-black font-bold px-6 py-2 rounded-lg hover:scale-105 transition-transform text-center">Play Now</a>
          <a href="profile.html" class="bg-white/10 text-white px-6 py-2 rounded-lg hover:bg-cyan-400/20 transition text-center">View Profile</a>
        </div>
      </div>
      `;
    }
    // INIT PAGE
    function getGameIdFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
    }
    function pickGame(id) {
      return gamesData.find(g => String(g.id) === String(id)) || gamesData[0];
    }
    function main() {
      showPreloader();
      let id = getGameIdFromURL();
      let game = pickGame(id);
      renderGameInfo(game);
      let suggested = getSuggestedGames(game.id, game.category, 8);
      renderSuggestedGamesSidebar(suggested);
      hidePreloader();
    }
    document.addEventListener('DOMContentLoaded', main);
  </script>
</body>
</html>
