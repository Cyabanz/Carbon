<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CARBON</title>
    <script defer async>
      function setConfig() {
        tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                display: ["Switzer", "Helvetica", "sans-serif"],
                inter: ["Inter", "sans-serif"],
              },
              colors: {
                base: "#191724",
                surface: "#1f1d2e",
                overlay: "#26233a",
                muted: "#6e6a86",
                subtle: "#908caa",
                text: "#e0def4",
                love: "#eb6f92",
                gold: "#f6c177",
                rose: "#ebbcba",
                pine: "#31748f",
                foam: "#9ccfd8",
                iris: "#c4a7e7",
                "highlight-low": "#21202e",
                "highlight-med": "#403d52",
                "highlight-high": "#524f67",
              },
            },
          },
        };
      }
    </script>
    <link rel="preconnect" href="https://unpkg.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://cdn.tailwindcss.com" />
    <script
      defer
      async
      src="https://cdn.tailwindcss.com"
      onload="setConfig()"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link href="/css/boxicons.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <style>
      .suggestion-box {
        position: absolute;
        left: 0;
        right: 0;
        top: 100%;
        z-index: 1200;
        background: #1f1d2e;
        border-radius: 0 0 0.75rem 0.75rem;
        border: 1px solid #26233a;
        border-top: none;
        max-height: 220px;
        overflow-y: auto;
        box-shadow: 0 6px 20px 2px #000a;
        color: #e0def4;
        font-size: 1rem;
        width: 100%;
      }
      .suggestion-item {
        padding: 0.73rem 1.1rem;
        cursor: pointer;
        transition: background 0.16s;
        border-bottom: 1px solid #26233a;
      }
      .suggestion-item:last-child {
        border-bottom: none;
      }
      .suggestion-item:hover,
      .suggestion-item.active {
        background: #26233a;
        color: #9ccfd8;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .dropdown-list {
        min-width: 160px;
      }
      .dropdown-list button {
        font-size: 1rem;
      }
    </style>
  </head>
  <body
    class="font-inter bg-gradient-to-br from-base via-surface to-overlay min-h-screen text-text overflow-x-hidden"
  >
    <main class="flex flex-col items-center justify-center min-h-screen p-4">
      <div class="w-full max-w-6xl mx-auto">
        <!-- Main Container -->
        <div
          class="bg-surface/90 backdrop-blur-sm rounded-2xl shadow-2xl border border-overlay/50 overflow-hidden"
        >
          <!-- Tab Bar and Mode Toggle -->
          <div
            class="bg-overlay/80 border-b border-highlight-med/50 flex items-end"
          >
            <div
              id="pinned-tabs-bar"
              class="flex items-end overflow-x-auto scrollbar-hide min-h-[36px] px-2 py-1"
            ></div>
            <div
              id="tabs-bar"
              class="flex items-end flex-1 overflow-x-auto scrollbar-hide min-h-[40px] px-2 pt-2"
            ></div>
            <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
                  TABS LAYOUT TOGGLE BUTTON: Horizontal/Vertical
                  Click this button to switch between horizontal/vertical tabs
                  Shortcut: Ctrl+L
                  Icon: "Transfer" icon (two arrows)
                 <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<-->
            <button
              id="tabs-mode-toggle-btn"
              class="mx-2 mb-1 flex-shrink-0 w-8 h-8 rounded-full bg-transparent hover:bg-highlight-med text-gold hover:text-foam font-bold text-xl transition-all duration-200 flex items-center justify-center border-2 border-gold"
              title="Toggle Tabs Layout (Horizontal/Vertical) [Ctrl+L]"
              aria-label="Toggle Horizontal/Vertical Tabs"
            >
              <i class="bx bx-transfer-alt"></i>
            </button>
            <!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
            <button
              id="new-tab-btn"
              class="flex-shrink-0 w-8 h-8 rounded-full bg-transparent hover:bg-highlight-med text-muted hover:text-text font-bold text-xl transition-all duration-200 flex items-center justify-center mx-2 mb-1"
              title="New Tab (Ctrl+T)"
            >
              +
            </button>
          </div>
          <!-- Header with Controls -->
          <div class="bg-overlay/50 p-4 border-b border-highlight-med/30">
            <div
              class="flex flex-col lg:flex-row gap-4 items-center justify-between"
            >
              <!-- Proxy Toggle Icon Button Left -->
              <div class="flex items-center gap-6">
                <div class="relative">
                  <button
                    id="proxy-toggle-btn"
                    class="w-12 h-12 rounded-xl bg-highlight-med hover:bg-highlight-high text-foam border-2 border-foam flex items-center justify-center text-2xl group transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-foam"
                    title="Switch Proxy"
                  >
                    <i id="proxy-toggle-icon" class="bx bx-cloud text-2xl"></i>
                  </button>
                  <div
                    id="proxy-dropdown"
                    class="hidden dropdown-list absolute left-0 top-14 bg-overlay border-2 border-foam rounded-xl shadow-xl z-50 py-1"
                  >
                    <button
                      data-proxy="uv"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bx-cloud"></i>UV
                    </button>
                    <button
                      data-proxy="scram"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bx-network-chart"></i>Scramjet
                    </button>
                  </div>
                </div>
                <!-- Navigation Buttons -->
                <div class="flex items-center gap-2">
                  <button
                    id="back-btn"
                    class="w-10 h-10 rounded-xl border-foam border-2 bg-highlight-med hover:bg-highlight-high transition-colors duration-200 flex items-center justify-center group"
                    title="Back"
                  >
                    <i
                      class="bx bx-left-arrow-alt text-2xl border-foam text-subtle group-hover:text-text transition-colors"
                    ></i>
                  </button>
                  <button
                    id="forward-btn"
                    class="w-10 h-10 rounded-xl bg-highlight-med border-foam border-2 hover:bg-highlight-high transition-colors duration-200 flex items-center justify-center group"
                    title="Forward"
                  >
                    <i
                      class="bx bx-right-arrow-alt text-2xl text-subtle group-hover:text-text transition-colors"
                    ></i>
                  </button>
                  <button
                    id="refresh-btn"
                    class="border-foam border-2 w-10 h-10 rounded-xl bg-highlight-med hover:bg-highlight-high transition-colors duration-200 flex items-center justify-center group"
                    title="Refresh"
                  >
                    <i
                      class="bx bx-refresh text-2xl text-subtle group-hover:text-text transition-colors"
                    ></i>
                  </button>
                  <button
                    id="history-btn"
                    class="w-10 h-10 rounded-xl bg-highlight-med border-foam border-2 hover:bg-highlight-high transition-colors duration-200 flex items-center justify-center group"
                    title="Show History"
                  >
                    <i
                      class="bx bx-history text-2xl text-subtle group-hover:text-text transition-colors"
                    ></i>
                  </button>
                </div>
              </div>
              <!-- Address Bar -->
              <form id="address-bar-form" class="w-full relative">
                <input
                  id="address-bar-input"
                  type="text"
                  spellcheck="false"
                  autocomplete="off"
                  placeholder="Search the web freely"
                  class="w-full h-12 bg-highlight-med border-2 border-foam text-text rounded-xl px-6 py-4 text-lg placeholder-muted focus:outline-none focus:border-foam"
                />
                <div id="suggestion-box" class="suggestion-box hidden"></div>
              </form>
              <!-- Search Engine Icon Button Right -->
              <div class="flex items-center gap-6">
                <div class="relative">
                  <button
                    id="search-engine-btn"
                    class="w-12 h-12 rounded-xl border-foam border-2 bg-highlight-med hover:bg-highlight-high text-foam flex items-center justify-center text-2xl group transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-foam"
                    title="Switch Search"
                  >
                    <i
                      id="search-engine-icon"
                      class="bx bxl-brave text-2xl"
                    ></i>
                  </button>
                  <div
                    id="search-engine-dropdown"
                    class="hidden dropdown-list absolute right-0 top-14 bg-overlay border-2 border-foam rounded-xl shadow-xl z-50 py-1"
                  >
                    <button
                      data-engine="https://search.brave.com/search?q=%s"
                      class="w-full flex border-foam border-2 items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bxl-brave"></i>Brave
                    </button>
                    <button
                      data-engine="https://duckduckgo.com/?q=%s"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bxl-duckduckgo"></i>DuckDuckGo
                    </button>
                    <button
                      data-engine="https://www.google.com/search?q=%s"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bxl-google"></i>Google
                    </button>
                    <button
                      data-engine="https://www.bing.com/search?q=%s"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bxl-microsoft"></i>Bing
                    </button>
                    <button
                      data-engine="https://search.yahoo.com/search?p=%s"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bxl-yahoo"></i>Yahoo
                    </button>
                    <button
                      data-engine="https://www.ecosia.org/search?q=%s"
                      class="w-full flex items-center gap-2 px-4 py-3 text-text hover:bg-highlight-med transition-colors text-lg"
                    >
                      <i class="bx bxl-leaf"></i>Ecosia
                    </button>
                  </div>
                </div>
                <div class="relative">
                  <button
                    id="menu-btn"
                    class="w-12 border-foam border-2 h-12 rounded-xl bg-highlight-med hover:bg-highlight-high transition-colors duration-200 flex items-center justify-center group"
                    title="Menu"
                  >
                    <i
                      class="bx bx-dots-horizontal-rounded text-2xl text-subtle group-hover:text-text transition-colors"
                    ></i>
                  </button>
                  <div
                    id="dropdown-menu"
                    class="hidden dropdown-list absolute right-0 top-14 bg-overlay border-2 border-foam rounded-xl shadow-xl z-50 py-1"
                  >
                    <button
                      id="wisp-btn"
                      class="w-full text-left px-4 py-2 text-text hover:bg-highlight-med transition-colors text-sm"
                    >
                      select Wisp server
                    </button>
                    <button
                      id="clear-history-btn"
                      class="w-full text-left px-4 py-2 text-text hover:bg-highlight-med transition-colors text-sm"
                    >
                      Clear History
                    </button>
                    <button
                      id="close-all-tabs-btn"
                      class="w-full text-left px-4 py-2 text-text hover:bg-highlight-med transition-colors text-sm"
                    >
                      Close All Tabs
                    </button>
                    <button
                      id="restore-tabs-btn"
                      class="w-full text-left px-4 py-2 text-text hover:bg-highlight-med transition-colors text-sm"
                    >
                      Restore Tabs
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Content Area -->
          <div class="bg-black border-t border-highlight-med/30">
            <iframe
              id="proxy-iframe"
              title="Proxy Frame"
              class="w-full h-[70vh] border-0"
            ></iframe>
          </div>
        </div>
      </div>
      <!-- History Modal -->
      <div
        id="history-modal-bg"
        class="fixed border-foam border-2 inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300 z-50"
      >
        <div
          id="history-modal"
          class="bg-overlay border border-highlight-med rounded-2xl shadow-2xl max-w-md w-[90vw] p-6 relative transform scale-95 opacity-0 transition-all duration-300"
        >
          <button
            id="close-history-modal"
            class="absolute top-4 right-4 text-muted hover:text-love transition-colors"
          >
            <i class="bx bx-x text-2xl"></i>
          </button>
          <h2 class="text-xl font-bold mb-6 text-text flex items-center">
            <i class="bx bx-history mr-3 text-foam"></i>
            Tab History
          </h2>
          <div
            id="modal-history-list"
            class="max-h-80 overflow-y-auto space-y-2 text-subtle scrollbar-thin scrollbar-thumb-foam scrollbar-track-highlight-med"
          ></div>
        </div>
      </div>
    </main>
    <!-- Main Script: Enable module for full ES6 and import support -->
    <script type="module" defer src="/carbon-tabs-modes.js"></script>
  </body>
</html>
