<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Redirect Button - CARBON Games</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body class="bg-gray-900 text-white p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8 text-center">
            <i class="bx bx-box"></i>
            Redirect Button Test - CARBON Games
        </h1>
        
        <div class="grid md:grid-cols-2 gap-6">
            <!-- Redirect Feature Info -->
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-xl font-semibold mb-4 text-orange-400">
                    <i class="bx bx-info-circle"></i>
                    Redirect Button Features
                </h2>
                <ul class="space-y-3">
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Orange box icon button</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Opens game directory in new tab</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Tracks game start for profile</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Updates play count statistics</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Changes status to "ingame"</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Auto returns to "online" after 5 seconds</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="bx bx-check text-green-400"></i>
                        <span>Logs "redirected" activity</span>
                    </li>
                </ul>
            </div>
            
            <!-- Test Games -->
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-xl font-semibold mb-4 text-blue-400">
                    <i class="bx bx-play"></i>
                    Test Redirect with These Games
                </h2>
                <div class="space-y-4">
                    <a href="play.html?id=1" 
                       class="block bg-orange-600 hover:bg-orange-700 px-4 py-3 rounded-lg transition-colors text-center">
                        <i class="bx bx-box mr-2"></i>
                        3D Bowling → /games/3d-bowling/
                    </a>
                    <a href="play.html?id=15" 
                       class="block bg-orange-600 hover:bg-orange-700 px-4 py-3 rounded-lg transition-colors text-center">
                        <i class="bx bx-box mr-2"></i>
                        Amaze → /games/amaze/
                    </a>
                    <a href="play.html?id=32" 
                       class="block bg-orange-600 hover:bg-orange-700 px-4 py-3 rounded-lg transition-colors text-center">
                        <i class="bx bx-box mr-2"></i>
                        Pou → /games/pou/
                    </a>
                    <a href="../profile.html" 
                       class="block bg-green-600 hover:bg-green-700 px-4 py-3 rounded-lg transition-colors text-center">
                        <i class="bx bx-user mr-2"></i>
                        Check Profile Stats
                    </a>
                </div>
            </div>
        </div>
        
        <!-- How It Works -->
        <div class="mt-8 bg-gray-800 rounded-lg p-6">
            <h2 class="text-xl font-semibold mb-4 text-yellow-400">
                <i class="bx bx-cog"></i>
                How the Redirect Button Works
            </h2>
            <div class="space-y-4 text-gray-300">
                <div class="flex items-start gap-3">
                    <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0">1</span>
                    <div>
                        <strong>URL Conversion:</strong> Converts <code>./games/amaze/index.html</code> to <code>./amaze/</code>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0">2</span>
                    <div>
                        <strong>Profile Tracking:</strong> Calls <code>trackGameStart()</code> to update user status to "ingame"
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0">3</span>
                    <div>
                        <strong>Statistics Update:</strong> Increments play count and logs activity for profile feed
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0">4</span>
                    <div>
                        <strong>New Tab:</strong> Opens game directory in new tab using <code>window.open()</code>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0">5</span>
                    <div>
                        <strong>Auto Return:</strong> Status returns to "online" after 5 seconds
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Firebase Collections -->
        <div class="mt-8 bg-gray-800 rounded-lg p-6">
            <h2 class="text-xl font-semibold mb-4 text-purple-400">
                <i class="bx bx-data"></i>
                Firebase Data Updated by Redirect
            </h2>
            <div class="grid md:grid-cols-2 gap-4 text-sm">
                <div>
                    <h3 class="font-semibold text-purple-300 mb-2">users/{uid}</h3>
                    <ul class="space-y-1 text-gray-300">
                        <li>• status: "ingame" → "online"</li>
                        <li>• currentGame: gameId</li>
                        <li>• lastActivity: timestamp</li>
                        <li>• totalGamesPlayed: +1</li>
                        <li>• lastPlayedGame: gameId</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-purple-300 mb-2">users/{uid}/gameStats/{gameId}</h3>
                    <ul class="space-y-1 text-gray-300">
                        <li>• playCount: +1</li>
                        <li>• lastPlayed: timestamp</li>
                        <li>• sessions: +1</li>
                        <li>• totalPlayTime: accumulated</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-purple-300 mb-2">activity/</h3>
                    <ul class="space-y-1 text-gray-300">
                        <li>• action: "started"</li>
                        <li>• action: "redirected"</li>
                        <li>• gameId, gameTitle</li>
                        <li>• userId, userName</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>