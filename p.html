      transform: translateX(0);
    }

    .notification.success {
      border-left: 4px solid #4caf50;
    }

    .notification.error {
      border-left: 4px solid #f44336;
    }

    @media (max-width: 768px) {
      .controls-overlay {
        top: 12px;
        left: 12px;
        flex-direction: column;
        gap: 8px;
      }
      
      .control-button {
        padding: 10px 14px;
        font-size: 13px;
      }
      
      .dropdown-menu {
        min-width: 180px;
      }
      
      .favorites-menu {
        min-width: 280px;
        max-width: 320px;
      }
    }
  </style>
</head>
<body>
  <div class="player-container">
    <div class="loading-indicator" id="loadingIndicator">
      <i class="fas fa-spinner fa-spin"></i>
    </div>
    
    <div class="controls-overlay">
      <div class="control-group">
        <button class="control-button" id="sourceButton">
          <i class="fas fa-cloud"></i>
          <span id="currentSource">VidSrc</span>
        </button>
        <div class="dropdown-menu" id="dropdownMenu">
          <div class="dropdown-option" data-source="premium">
            <div class="option-content">
              <div class="option-title">123Embed</div>
              <div class="option-description">High quality • No ads • Most content</div>
            </div>
          </div>
          <div class="dropdown-option active" data-source="vidsrc">
            <div class="option-content">
              <div class="option-title">VidSrc</div>
              <div class="option-description">Good quality • No ads • Less content</div>
            </div>
          </div>
          <div class="dropdown-option" data-source="embed123">
            <div class="option-content">
              <div class="option-title">123Embed</div>
              <div class="option-description">Standard quality • No ads • Limited content</div>
            </div>
          </div>
          <div class="dropdown-option" data-source="moviesapi">
            <div class="option-content">
              <div class="option-title">MoviesAPI</div>
              <div class="option-description">Variable quality • Has ads • More content</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="control-group">
        <button class="control-button" id="favoriteButton">
          <i class="fas fa-heart"></i>
        </button>
      </div>
      
      <div class="control-group">
        <button class="control-button" id="favoritesListButton">
          <i class="fas fa-list"></i>
        </button>
        <div class="dropdown-menu favorites-menu" id="favoritesMenu">
          <div class="favorites-header">
            <i class="fas fa-heart"></i>
            <span>My Favorites</span>
          </div>
          <div class="favorites-list" id="favoritesList">
            <!-- Favorites will be populated here -->
          </div>
          <div class="add-favorite-form">
            <div class="form-group">
              <label class="form-label">Movie Title</label>
              <input type="text" class="form-input" id="movieTitle" placeholder="Enter movie title">
            </div>
            <div class="form-group">
              <label class="form-label">Movie ID</label>
              <input type="text" class="form-input" id="movieId" placeholder="Enter TMDB ID">
            </div>
            <button class="form-btn" id="addFavoriteBtn">Add to Favorites</button>
          </div>
        </div>
      </div>
    </div>
    
    <iframe class="player-iframe" id="playerFrame" src=""></iframe>
  </div>

  <script>
    class MoviePlayer {
      constructor() {
        this.sources = {
          premium: "https://play2.123embed.net/movie/MOVIE_ID",
          vidsrc: "https://vidsrc.su/embed/movie/MOVIE_ID",
          embed123: "https://play2.123embed.net/movie/MOVIE_ID",
          moviesapi: "https://moviesapi.club/movie/MOVIE_ID"
        };
        
        this.currentSource = 'vidsrc';
        this.currentMovieId = null;
        this.favorites = this.loadFavorites();
        this.carbonTheme = null;
        
        this.init();
      }
      
      init() {
        this.initializeTheme();
        this.bindEvents();
        this.loadMovieFromHash();
        this.updateFavoriteButton();
        this.renderFavoritesList();
      }
      
      initializeTheme() {
        // Initialize Carbon Theme System
        if (typeof CarbonTheme !== 'undefined') {
          this.carbonTheme = new CarbonTheme();
          // Apply the current theme
          const currentTheme = this.carbonTheme.getCurrentTheme();
          this.applyTheme(currentTheme);
          
          // Listen for theme changes
          window.addEventListener('themeChanged', (event) => {
            this.applyTheme(event.detail.theme);
          });
        }
      }
      
      applyTheme(themeName) {
        document.documentElement.setAttribute('data-theme', themeName);
        // Update body background
        const theme = this.carbonTheme.getTheme(themeName);
        if (theme) {
          document.body.style.background = `linear-gradient(135deg, ${theme.base} 0%, ${theme.surface} 50%, ${theme.overlay} 100%)`;
        }
      }
      
      bindEvents() {
        // Source selector button click
        document.getElementById('sourceButton').addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleDropdown('dropdownMenu');
        });
        
        // Dropdown option clicks
        document.querySelectorAll('.dropdown-option').forEach(option => {
          option.addEventListener('click', (e) => {
            e.stopPropagation();
            const source = option.getAttribute('data-source');
            this.changeSource(source);
          });
        });
        
        // Favorite button click
        document.getElementById('favoriteButton').addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleFavorite();
        });
        
        // Favorites list button click
        document.getElementById('favoritesListButton').addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleDropdown('favoritesMenu');
        });
        
        // Add favorite form
        document.getElementById('addFavoriteBtn').addEventListener('click', (e) => {
          e.stopPropagation();
          this.addFavoriteFromForm();
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
          this.closeAllDropdowns();
        });
